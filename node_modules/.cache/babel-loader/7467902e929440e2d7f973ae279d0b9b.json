{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/data/data/com.termux/files/home/projects/rentyug-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import MessageCard from'../Components/MessageCard';import MessageBox from'./MessageBox';import axios from'axios';function MessageScreen(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),msgBox=_useState6[0],setMsgBox=_useState6[1];var _useState7=useState('x'),_useState8=_slicedToArray(_useState7,2),msgingTo=_useState8[0],setMsgingTo=_useState8[1];useEffect(function(){var url=localStorage.getItem('url');axios.post(url+'messageBox/',{'Username':localStorage.getItem('user223')}).then(function(res){setData(res.data);});},[msgBox]);var handleClick=function handleClick(msgMan){setMsgingTo(msgMan);var url=localStorage.getItem('url');axios.post(url+'messages/',{'Username':localStorage.getItem('user223'),'MessagePartner':msgMan}).then(function(res){setMessages(res.data);setMsgBox(true);});};var handleSendingMsg=function handleSendingMsg(msg,msgMan){var url=localStorage.getItem('url');axios.post(url+'addMessages/',{'SendBy':localStorage.getItem('user223'),'Message':msg,'RecievedBy':msgMan}).then(function(res){setMessages(res.data);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"MessageScreen\",children:[msgBox?/*#__PURE__*/_jsxs(\"div\",{className:\"MessageBoxOuter\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"cross\",onClick:function onClick(){return setMsgBox(false);},children:\"X\"}),/*#__PURE__*/_jsx(MessageBox,{handleSendingMsg:handleSendingMsg,msgingTo:msgingTo,handleRegularRender:handleClick,data:messages})]}):'',data.map(function(d){return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return handleClick(d.MessagePartner);},children:/*#__PURE__*/_jsx(MessageCard,{Username:d.Username,Name:d.MessagePartner,Unread:d.UnreadMessages})},d.id);})]});}export default MessageScreen;","map":{"version":3,"sources":["/data/data/com.termux/files/home/projects/rentyug-frontend/src/Screens/MessageScreen.js"],"names":["React","useEffect","useState","MessageCard","MessageBox","axios","MessageScreen","data","setData","messages","setMessages","msgBox","setMsgBox","msgingTo","setMsgingTo","url","localStorage","getItem","post","then","res","handleClick","msgMan","handleSendingMsg","msg","map","d","MessagePartner","Username","UnreadMessages","id"],"mappings":"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","sourcesContent":["import React,{ useEffect ,useState} from 'react';\nimport MessageCard from '../Components/MessageCard';\nimport MessageBox from './MessageBox';\nimport axios from 'axios';\n\n\nfunction MessageScreen(){\n\n\tconst [data, setData] = useState([]);\n\tconst [messages, setMessages] = useState([]);\n\tconst [msgBox, setMsgBox] = useState(false);\n\tconst [msgingTo, setMsgingTo] = useState('x');\n\t\n\t\n\tuseEffect(()=>{\n\t\tconst url = localStorage.getItem('url');\n\t\taxios.post(url+'messageBox/',{'Username':localStorage.getItem('user223')}).then(res=>{\n\t\t\tsetData(res.data);\n\t\t})\n\t},[msgBox]);\n\n\tconst handleClick = msgMan=>{\n\t\tsetMsgingTo(msgMan);\n\t\tconst url = localStorage.getItem('url');\n\t\taxios.post(url+'messages/',{\n\t\t'Username':localStorage.getItem('user223'),\n\t\t'MessagePartner':msgMan\n\t\t}).then(res=>{\n\t\t\tsetMessages(res.data);\n\t\t\tsetMsgBox(true);\n\t\t})\n\t}\n\n\tconst handleSendingMsg=(msg,msgMan)=>{\n\t\tconst url = localStorage.getItem('url');\n\t\taxios.post(url+'addMessages/',{\n\t\t\t'SendBy':localStorage.getItem('user223'),\n\t\t\t'Message':msg,\n\t\t\t'RecievedBy':msgMan\n\t\t}).then(res=>{\n\t\t\tsetMessages(res.data);\n\t\t})\n\t}\n\t\n\treturn(\n\t\t<div className='MessageScreen'>\n\t\t\t{msgBox?<div className='MessageBoxOuter'><h3\n\t\t\tclassName='cross'\n\t\t\tonClick={()=>setMsgBox(false)}>X</h3><MessageBox \n\t\t\thandleSendingMsg={handleSendingMsg}\n\t\t\tmsgingTo={msgingTo}\n\t\t\thandleRegularRender={handleClick}\n\t\t\tdata={messages}/></div>:''}\n\t\t\t\n\t\t\t{data.map(d=><div key={d.id} onClick={()=>handleClick(d.MessagePartner)}><MessageCard \n\t\t\tUsername={d.Username}\n\t\t\tName={d.MessagePartner}\n\t\t\tUnread = {d.UnreadMessages}\n\t\t\t/></div>)}\n\t\t\t\n\t\t</div>\n\t);\n}\n\nexport default MessageScreen;\n"]},"metadata":{},"sourceType":"module"}